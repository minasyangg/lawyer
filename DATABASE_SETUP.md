# Настройка окружения базы данных

## Файлы окружения

### `.env.local` - Локальная разработка
- Использует **SQLite** базу данных (`file:./dev.db`)
- Загружается автоматически Next.js при разработке
- Содержит конфигурацию для локальной разработки

### `.env.production` - Продакшн
- Использует **PostgreSQL** Supabase базу данных
- Используется на Vercel и для тестирования продакшн схемы
- Содержит полные строки подключения к Supabase

### `.env` - Базовые переменные
- Содержит общие API ключи
- Используется как fallback

## Команды

### Локальная разработка (SQLite)
```bash
# Запуск разработки
npm run dev

# Применение миграций к локальной БД
npm run db:push

# Просмотр локальной БД
npm run db:studio

# Создание новой миграции
npm run db:migrate

# Сброс локальной БД
npm run db:reset
```

### Продакшн/Supabase (PostgreSQL)
```bash
# Применение схемы к Supabase
npm run db:push:prod

# Просмотр Supabase БД
npm run db:studio:prod

# Применение миграций на продакшн
npm run db:migrate:prod
```

## Структура

- **Локально**: SQLite файл `./prisma/dev.db`
- **Продакшн**: Supabase PostgreSQL база данных
- **Схема**: Одна схема `prisma/schema.prisma` работает с обоими провайдерами

## Переключение между окружениями

Next.js автоматически загружает файлы окружения в следующем порядке:
1. `.env.local` (локальная разработка)
2. `.env.production` (продакшн/Vercel)
3. `.env` (базовые переменные)

Для ручного тестирования продакшн БД используйте команды с суффиксом `:prod`.
