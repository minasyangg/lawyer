# ðŸ“‘ Ð§ÐµÑ€Ð½Ð¾Ð²Ð¸Ðº Ð¢Ð— â€” Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ Ñ„Ð°Ð¹Ð»Ð°Ð¼Ð¸ Ð¸ ÑÑ‚Ð°Ñ‚ÑŒÑÐ¼Ð¸

## 1. ÐžÐ±Ñ‰Ð°Ñ ÐºÐ¾Ð½Ñ†ÐµÐ¿Ñ†Ð¸Ñ
ÐŸÑ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ð´Ð¾Ð»Ð¶Ð½Ð¾ Ð¾Ð±ÐµÑÐ¿ÐµÑ‡Ð¸Ð²Ð°Ñ‚ÑŒ Ñ†ÐµÐ½Ñ‚Ñ€Ð°Ð»Ð¸Ð·Ð¾Ð²Ð°Ð½Ð½Ð¾Ðµ Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ Ñ„Ð°Ð¹Ð»Ð¾Ð² Ð¸ ÑÑ‚Ð°Ñ‚ÐµÐ¹ Ñ Ñ€Ð°Ð·Ð´ÐµÐ»ÐµÐ½Ð¸ÐµÐ¼ Ð¿Ñ€Ð°Ð² Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð° Ð½Ð° Ð¾ÑÐ½Ð¾Ð²Ðµ Ñ€Ð¾Ð»ÐµÐ¹ **ADMIN** Ð¸ **EDITOR**. Ð’ÑÐµ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÑŽÑ‚ÑÑ Ñ‡ÐµÑ€ÐµÐ· **Server Actions** (ÐµÑÐ»Ð¸ Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾) Ð¸Ð»Ð¸ Ñ‡ÐµÑ€ÐµÐ· **API**, Ñ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸ÐµÐ¼ **Supabase JS** Ð¸ Prisma ORM.

---

## 2. Ð Ð¾Ð»Ð¸ Ð¸ Ð¿Ñ€Ð°Ð²Ð° Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð°

### ADMIN
- ÐŸÐ¾Ð»Ð½Ñ‹Ð¹ Ð´Ð¾ÑÑ‚ÑƒÐ¿ ÐºÐ¾ Ð²ÑÐµÐ¼Ñƒ Ñ„Ð°Ð¹Ð»Ð¾Ð²Ð¾Ð¼Ñƒ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ñƒ Ð¸ ÑÑ‚Ð°Ñ‚ÑŒÑÐ¼.
- ÐœÐ¾Ð¶ÐµÑ‚ ÑƒÐ´Ð°Ð»ÑÑ‚ÑŒ, Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ, Ð¿ÐµÑ€ÐµÐ¼ÐµÑ‰Ð°Ñ‚ÑŒ Ñ„Ð°Ð¹Ð»Ñ‹ Ð¸ Ð¿Ð°Ð¿ÐºÐ¸ Ð»ÑŽÐ±Ñ‹Ñ… Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹.
- ÐœÐ¾Ð¶ÐµÑ‚ ÑƒÐ´Ð°Ð»ÑÑ‚ÑŒ Ð´Ð°Ð¶Ðµ Ð·Ð°Ñ‰Ð¸Ñ‰Ñ‘Ð½Ð½Ñ‹Ðµ (`isProtected`) Ñ„Ð°Ð¹Ð»Ñ‹ Ð¸ Ð¿Ð°Ð¿ÐºÐ¸, Ð½Ð¾ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ñ Ð¿Ð¾Ð´Ñ‚Ð²ÐµÑ€Ð¶Ð´ÐµÐ½Ð¸ÐµÐ¼ (toast).
- Ð’Ð¸Ð´Ð¸Ñ‚ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ñƒ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ð°, ÑÐ³Ñ€ÑƒÐ¿Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½ÑƒÑŽ Ð¿Ð¾ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑÐ¼ (`/users/{userId}/root`).
- Ð’Ð¸Ð´Ð¸Ñ‚ Ñ„Ð»Ð°Ð³Ð¸ `isProtected`, `isPublic`, `userId` Ñƒ Ñ„Ð°Ð¹Ð»Ð¾Ð².

### EDITOR
- Ð”Ð¾ÑÑ‚ÑƒÐ¿ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ðº ÑÐ²Ð¾ÐµÐ¼Ñƒ Ñ„Ð°Ð¹Ð»Ð¾Ð²Ð¾Ð¼Ñƒ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ñƒ.
- ÐœÐ¾Ð¶ÐµÑ‚ ÑÐ¾Ð·Ð´Ð°Ð²Ð°Ñ‚ÑŒ/ÑƒÐ´Ð°Ð»ÑÑ‚ÑŒ/Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ ÑÐ²Ð¾Ð¸ Ð¿Ð°Ð¿ÐºÐ¸ Ð¸ Ñ„Ð°Ð¹Ð»Ñ‹.
- ÐÐµ Ð²Ð¸Ð´Ð¸Ñ‚ Ñ‡ÑƒÐ¶Ð¸Ñ… Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹ Ð¸ Ð¸Ñ… Ñ„Ð°Ð¹Ð»Ð¾Ð².
- ÐÐµ Ð¼Ð¾Ð¶ÐµÑ‚ ÑƒÐ´Ð°Ð»ÑÑ‚ÑŒ Ñ„Ð°Ð¹Ð»Ñ‹ Ð¸Ð»Ð¸ Ð¿Ð°Ð¿ÐºÐ¸ Ñ `isProtected = true`.

### USER (Ð³Ð¾ÑÑ‚Ð¸ ÑÐ°Ð¹Ñ‚Ð°)
- ÐœÐ¾Ð³ÑƒÑ‚ Ð¿Ñ€Ð¾ÑÐ¼Ð°Ñ‚Ñ€Ð¸Ð²Ð°Ñ‚ÑŒ Ð¸ ÑÐºÐ°Ñ‡Ð¸Ð²Ð°Ñ‚ÑŒ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ñ‚Ðµ Ñ„Ð°Ð¹Ð»Ñ‹, Ñƒ ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ñ… `isPublic = true`.
- Ð”Ð¾ÑÑ‚ÑƒÐ¿ Ð¾ÑÑƒÑ‰ÐµÑÑ‚Ð²Ð»ÑÐµÑ‚ÑÑ Ñ‡ÐµÑ€ÐµÐ· Ð¿ÑƒÐ±Ð»Ð¸Ñ‡Ð½Ñ‹Ðµ ÑÑÑ‹Ð»ÐºÐ¸ Supabase.

---

## 3. Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° Ð‘Ð” (Prisma)
```prisma
model User {
  id        Int      @id @default(autoincrement())
  email     String   @unique
  name      String
  role      Role     @default(EDITOR)
  files     FileEntity[]
  articles  Article[]
}

enum Role {
  ADMIN
  EDITOR
  USER (Ð¿Ð¾ÑÐµÑ‚Ð¸Ñ‚ÐµÐ»ÑŒ ÑÐ°Ð¹Ñ‚Ð°)
}

model FileEntity {
  id          Int        @id @default(autoincrement())
  name        String
  path        String
  isFolder    Boolean    @default(false)
  isPublic    Boolean    @default(false)
  isProtected Boolean    @default(false)
  parentId    Int?
  parent      FileEntity? @relation("FolderChildren", fields: [parentId], references: [id])
  children    FileEntity[] @relation("FolderChildren")
  userId      Int
  user        User       @relation(fields: [userId], references: [id])
  articles    Article[]
  createdAt   DateTime   @default(now())
  updatedAt   DateTime   @updatedAt
  deletedAt   DateTime?
}

model Article {
  id        Int          @id @default(autoincrement())
  title     String
  content   String
  files     FileEntity[]
  createdAt DateTime     @default(now())
  updatedAt DateTime     @updatedAt
  deletedAt DateTime?
}
```

---

## 4. Ð¤Ð»Ð°Ð³Ð¸ Ð¸ Ð¿Ñ€Ð°Ð²Ð¸Ð»Ð°
| Ð¤Ð»Ð°Ð³ | ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ |
|------|----------|
| `isPublic` | ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑÑ `true`, ÐµÑÐ»Ð¸ Ñ„Ð°Ð¹Ð» Ð¿Ñ€Ð¸ÐºÑ€ÐµÐ¿Ð»Ñ‘Ð½ Ðº ÑÑ‚Ð°Ñ‚ÑŒÐµ (Ð´Ð¾ÑÑ‚ÑƒÐ¿ÐµÐ½ Ð¿Ð¾ÑÐµÑ‚Ð¸Ñ‚ÐµÐ»ÑÐ¼ ÑÐ°Ð¹Ñ‚Ð°). |
| `isProtected` | ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑÑ `true`, ÐµÑÐ»Ð¸ Ñ„Ð°Ð¹Ð» Ð¿Ñ€Ð¸ÐºÑ€ÐµÐ¿Ð»Ñ‘Ð½ Ñ…Ð¾Ñ‚Ñ Ð±Ñ‹ Ðº Ð¾Ð´Ð½Ð¾Ð¹ ÑÑ‚Ð°Ñ‚ÑŒÐµ (Ð½ÐµÐ»ÑŒÐ·Ñ ÑƒÐ´Ð°Ð»Ð¸Ñ‚ÑŒ ÑÐ»ÑƒÑ‡Ð°Ð¹Ð½Ð¾). |
| `deletedAt` | Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ Ð´Ð»Ñ soft delete. ÐŸÑ€Ð¸ ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ð¸ Ð¿Ñ€Ð¾Ð¸ÑÑ…Ð¾Ð´Ð¸Ñ‚ Ð½ÐµÐ¼ÐµÐ´Ð»ÐµÐ½Ð½Ð¾Ðµ ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ðµ Ñ„Ð°Ð¹Ð»Ð° Ð¸Ð· Supabase Ð¸ Ð¿Ð¾Ð¼ÐµÑ‚ÐºÐ° Ð² Ð‘Ð”. |

---

## 5. Ð›Ð¾Ð³Ð¸ÐºÐ° ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ
- **ÐŸÐ°Ð¿ÐºÐ°:** ÑƒÐ´Ð°Ð»ÑÐµÑ‚ÑÑ ÐºÐ°ÑÐºÐ°Ð´Ð½Ð¾ (Ð²ÑÐµ Ð²Ð»Ð¾Ð¶ÐµÐ½Ð½Ñ‹Ðµ Ð¿Ð°Ð¿ÐºÐ¸ Ð¸ Ñ„Ð°Ð¹Ð»Ñ‹). Ð•ÑÐ»Ð¸ Ñ…Ð¾Ñ‚Ñ Ð±Ñ‹ Ð¾Ð´Ð¸Ð½ Ñ„Ð°Ð¹Ð» Ð·Ð°Ñ‰Ð¸Ñ‰Ñ‘Ð½ â€” EDITOR Ð½Ðµ Ð¼Ð¾Ð¶ÐµÑ‚ ÑƒÐ´Ð°Ð»Ð¸Ñ‚ÑŒ, ADMIN Ð¼Ð¾Ð¶ÐµÑ‚ (Ñ Ð¿Ð¾Ð´Ñ‚Ð²ÐµÑ€Ð¶Ð´ÐµÐ½Ð¸ÐµÐ¼ ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ðµ Ð²Ñ‹Ð»ÐµÐ·Ð°ÐµÑ‚ Ð²Ð²Ð¸Ð´Ðµ toaster).
- **Ð¤Ð°Ð¹Ð»:** EDITOR Ð½Ðµ Ð¼Ð¾Ð¶ÐµÑ‚ ÑƒÐ´Ð°Ð»Ð¸Ñ‚ÑŒ `isProtected = true`, ADMIN Ð¼Ð¾Ð¶ÐµÑ‚ (Ñ Ð¿Ð¾Ð´Ñ‚Ð²ÐµÑ€Ð¶Ð´ÐµÐ½Ð¸ÐµÐ¼ ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ðµ Ð²Ñ‹Ð»ÐµÐ·Ð°ÐµÑ‚ Ð²Ð²Ð¸Ð´Ðµ toaster).
- **Ð¡Ñ‚Ð°Ñ‚ÑŒÑ:** Ð¿Ñ€Ð¸ ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ð¸ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÑŽÑ‚ÑÑ Ð²ÑÐµ Ð¿Ñ€Ð¸Ð²ÑÐ·Ð°Ð½Ð½Ñ‹Ðµ Ñ„Ð°Ð¹Ð»Ñ‹, ÑƒÐ´Ð°Ð»ÑÑŽÑ‚ÑÑ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ñ‚Ðµ, Ñ‡Ñ‚Ð¾ Ð±Ð¾Ð»ÑŒÑˆÐµ Ð½Ð¸Ð³Ð´Ðµ Ð½Ðµ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÑŽÑ‚ÑÑ.

### UI-Ð»Ð¾Ð³Ð¸ÐºÐ° Ð¿Ð¾Ð´Ñ‚Ð²ÐµÑ€Ð¶Ð´ÐµÐ½Ð¸Ñ
- Ð”Ð»Ñ ADMIN Ð¿Ñ€Ð¸ ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ð¸ Ð·Ð°Ñ‰Ð¸Ñ‰Ñ‘Ð½Ð½Ñ‹Ñ… Ñ„Ð°Ð¹Ð»Ð¾Ð²/Ð¿Ð°Ð¿Ð¾Ðº Ð¿Ð¾ÐºÐ°Ð·Ñ‹Ð²Ð°Ñ‚ÑŒ **toast/modal**:
  - ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ: "Ð¤Ð°Ð¹Ð» Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ Ð² ÑÑ‚Ð°Ñ‚ÑŒÑÑ…, ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¸Ð²ÐµÐ´Ñ‘Ñ‚ Ðº Ñ€Ð°Ð·Ñ€Ñ‹Ð²Ñƒ ÑÐ²ÑÐ·ÐµÐ¹";
  - ÑÐ¿Ð¸ÑÐ¾Ðº ÑÑ‚Ð°Ñ‚ÐµÐ¹ Ð¸Ð»Ð¸ Ð¸Ñ… ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾;
  - ÐºÐ½Ð¾Ð¿ÐºÐ¸: **ÐŸÐ¾Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¸Ñ‚ÑŒ ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ðµ** (danger) / **ÐžÑ‚Ð¼ÐµÐ½Ð°**.
- Ð”Ð»Ñ EDITOR ÐºÐ½Ð¾Ð¿ÐºÐ° ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ Ð½ÐµÐ´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð° Ð´Ð»Ñ Ð·Ð°Ñ‰Ð¸Ñ‰Ñ‘Ð½Ð½Ñ‹Ñ… Ñ„Ð°Ð¹Ð»Ð¾Ð² (tooltip: "Ð¤Ð°Ð¹Ð» Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ Ð² ÑÑ‚Ð°Ñ‚ÑŒÐµ "Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ ÑÑ‚Ð°Ñ‚ÑŒÐ¸ Ð¸Ð»Ð¸ ÑÑÑ‹Ð»ÐºÐ° Ð½Ð° Ð½ÐµÑ‘"").

---

## 6. Server Actions Ð¸ API
- **Server Actions:**
  - Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ/ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ðµ/Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ñ„Ð°Ð¹Ð»Ð¾Ð² Ð¸ Ð¿Ð°Ð¿Ð¾Ðº.
  - Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ñ„Ð°Ð¹Ð»Ð¾Ð² Ð² Supabase Ð¸ Ð·Ð°Ð¿Ð¸ÑÑŒ Ð² Prisma.
  - ÐŸÑ€Ð¸Ð²ÑÐ·ÐºÐ°/Ð¾Ñ‚Ð²ÑÐ·ÐºÐ° Ñ„Ð°Ð¹Ð»Ð¾Ð² Ðº ÑÑ‚Ð°Ñ‚ÑŒÑÐ¼ (Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ°Ñ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ñ„Ð»Ð°Ð³Ð¾Ð²).
  - ÐšÐ°ÑÐºÐ°Ð´Ð½Ð¾Ðµ ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ðµ Ð¿Ð°Ð¿Ð¾Ðº Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¾Ð¹ Ð¿Ñ€Ð°Ð².
  - ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ ÑÐ²ÑÐ·Ð°Ð½Ð½Ñ‹Ñ… ÑÑ‚Ð°Ñ‚ÐµÐ¹ Ð´Ð»Ñ Ð¾Ñ‚Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ Ð² toaster.

- **API:**
  - ÐŸÑƒÐ±Ð»Ð¸Ñ‡Ð½Ñ‹Ð¹ ÑÐ¿Ð¸ÑÐ¾Ðº ÑÑ‚Ð°Ñ‚ÐµÐ¹ Ð¸ Ñ„Ð°Ð¹Ð»Ð¾Ð².
  - Ð“ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ñ Ð¿ÑƒÐ±Ð»Ð¸Ñ‡Ð½Ñ‹Ñ… Supabase URL (ÐµÑÐ»Ð¸ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð¿Ð¾Ð´Ð¿Ð¸ÑÐ°Ð½Ð½Ñ‹Ðµ ÑÑÑ‹Ð»ÐºÐ¸)

- **Ð£Ð¶Ðµ Ñ€ÐµÐ°Ð»Ð¸Ð·Ð¾Ð²Ð°Ð½Ð½Ñ‹Ðµ server Actions**
	- Ð½Ðµ Ð½ÑƒÐ¶Ð½Ð¾ ÑÐ¾Ð·Ð´Ð°Ð²Ð°Ñ‚ÑŒ Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ñ‹Ðµ serverActions Ð´Ð»Ñ Ð¾Ð´Ð½Ð¾Ð³Ð¾ Ð¸ Ñ‚Ð¾Ð³Ð¾Ð¶Ðµ Ð»Ð¸Ð±Ð¾ ÑÑ…Ð¾Ð¶ÐµÐ³Ð¾ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ. ÐŸÑ€ÐµÐ¶Ð´Ðµ Ñ‡ÐµÐ¼ ÑÐ¾Ð·Ð´Ð°Ð²Ð°Ñ‚ÑŒ Ð½ÑƒÐ¶Ð½Ð¾ Ð¸Ð·ÑƒÑ‡Ð¸Ñ‚ÑŒ Ð¸Ð¼ÐµÑŽÑ‰Ð¸ÐµÑÑ. ÐÐ°Ð¿Ñ€Ð¸Ð¼ÐµÑ€ Ð²ÑÐµ serverAction Ð´Ð»Ñ  CRUI ÑÑ‚Ð°Ñ‚ÐµÐ¹ Ð½Ð°Ñ…Ð¾Ð´ÑÑ‚Ñ Ð¿Ð¾ Ð¿ÑƒÑ‚Ð¸: /src/app/lib/app/lib/actions/article-actions.ts

> ÐŸÑ€Ð¸Ð¼ÐµÑ€Ñ‹ ÐºÐ¾Ð´Ð° Ð² Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ðµ ÑÐ²Ð»ÑÑŽÑ‚ÑÑ Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð¾Ð²Ð°Ð½Ð½Ñ‹Ð¼Ð¸ Ð¸ Ð¼Ð¾Ð³ÑƒÑ‚ Ð±Ñ‹Ñ‚ÑŒ Ð°Ð´Ð°Ð¿Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ñ‹ Ð°Ð³ÐµÐ½Ñ‚Ð¾Ð¼ Ð¿Ñ€Ð¸ ÑƒÑÐ»Ð¾Ð²Ð¸Ð¸, Ñ‡Ñ‚Ð¾ Ð½Ðµ Ð½Ð°Ñ€ÑƒÑˆÐ°ÐµÑ‚ÑÑ Ð±Ð¸Ð·Ð½ÐµÑ-Ð»Ð¾Ð³Ð¸ÐºÐ°.

---

## 7. ÐžÐ±Ñ‰Ð¸Ðµ Ñ‚Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ñ Ðº ÐºÐ¾Ð´Ñƒ
- Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ **TypeScript** Ñ ÑÐ²Ð½Ð¾Ð¹ Ñ‚Ð¸Ð¿Ð¸Ð·Ð°Ñ†Ð¸ÐµÐ¹.
- Ð”Ð»Ñ Ð²Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ð¸ Ð²Ñ…Ð¾Ð´Ð½Ñ‹Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ… â€” **Zod** Ð¸Ð»Ð¸ Ð°Ð½Ð°Ð»Ð¾Ð³.
- Ð”Ð»Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ñ Ð‘Ð” â€” Prisma Ñ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸ÐµÐ¼ Ñ‚Ð¸Ð¿Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ñ… Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÐ¼Ñ‹Ñ… Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ð¹.
- Ð’ÑÐµ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ Ð´Ð¾Ð»Ð¶Ð½Ñ‹ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°Ñ‚ÑŒ Ñ‚Ð¸Ð¿Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ð¹ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ (`{ success: boolean; message?: string }`).
- ÐžÑˆÐ¸Ð±ÐºÐ¸ â€” Ñ Ð¿Ð¾Ð½ÑÑ‚Ð½Ñ‹Ð¼Ð¸ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸ÑÐ¼Ð¸ Ð´Ð»Ñ UI.

---

## 8. Ð¢Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ñ Ðº UI
- ÐŸÐ¾Ð»Ð½Ð°Ñ ÑÑ‚Ð¸Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ñ‡ÐµÑ€ÐµÐ· **Tailwind CSS**.
- Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰ÑƒÑŽ Ð´Ð¸Ð·Ð°Ð¹Ð½-ÑÐ¸ÑÑ‚ÐµÐ¼Ñƒ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° (shadcn/ui Ð¸Ð»Ð¸ Ð°Ð½Ð°Ð»Ð¾Ð³Ð¸).
- Ð’ÑÐµ Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹ÑÑ‹ Ð°Ð´Ð°Ð¿Ñ‚Ð¸Ð²Ð½Ñ‹Ðµ, mobile-friendly.
- Ð¤Ð»Ð°Ð³Ð¸ `isPublic` Ð¸ `isProtected` Ð¾Ñ‚Ð¾Ð±Ñ€Ð°Ð¶Ð°ÑŽÑ‚ÑÑ Ð·Ð½Ð°Ñ‡ÐºÐ°Ð¼Ð¸ Ð¸Ð»Ð¸ Ñ†Ð²ÐµÑ‚Ð½Ñ‹Ð¼Ð¸ Ð±ÐµÐ¹Ð´Ð¶Ð°Ð¼Ð¸.
- ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ° Ñ‚ÐµÐ¼Ð½Ð¾Ð¹ Ñ‚ÐµÐ¼Ñ‹, ÐµÑÐ»Ð¸ Ð¾Ð½Ð° ÐµÑÑ‚ÑŒ Ð½Ð° ÑÐ°Ð¹Ñ‚Ðµ.

---

## 9. ÐŸÑ€Ð¸Ð¼ÐµÑ€Ñ‹ (Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸Ð¸)

### Server Action: ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ðµ Ð¿Ð°Ð¿ÐºÐ¸
```ts
'use server'

import { prisma } from '@/lib/prisma'
import { createClient } from '@supabase/supabase-js'
import { getCurrentUser } from '@/lib/session'

export async function deleteFolder(folderId: number) {
  const user = await getCurrentUser()
  if (!user) throw new Error('Unauthorized')

  const folder = await prisma.fileEntity.findUnique({
    where: { id: folderId, deletedAt: null },
    include: { children: true },
  })

  if (!folder) throw new Error('ÐŸÐ°Ð¿ÐºÐ° Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ð°')
  if (!folder.isFolder) throw new Error('Ð­Ñ‚Ð¾ Ð½Ðµ Ð¿Ð°Ð¿ÐºÐ°')

  if (user.role === 'EDITOR' && folder.userId !== user.id) {
    throw new Error('ÐÐµÑ‚ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð°')
  }

  // Ð ÐµÐºÑƒÑ€ÑÐ¸Ð²Ð½Ð¾Ðµ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ð²ÑÐµÑ… Ñ„Ð°Ð¹Ð»Ð¾Ð², Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ° isProtected, ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ðµ Ð¸Ð· Supabase
  // ...
}
```

### Server Action: Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ ÑÑ‚Ð°Ñ‚ÐµÐ¹ Ð´Ð»Ñ Ñ„Ð°Ð¹Ð»Ð°
```ts
'use server'

export async function getFileArticles(fileId: number) {
  return prisma.fileEntity.findUnique({
    where: { id: fileId, deletedAt: null },
    include: { articles: { select: { id: true, title: true } } },
  })
}
```

### UI-Ñ‚Ð¾ÑÑ‚ÐµÑ€
```tsx
openConfirmToast({
  title: 'Ð¤Ð°Ð¹Ð» Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ Ð² ÑÑ‚Ð°Ñ‚ÑŒÑÑ…',
  description: `Ð¤Ð°Ð¹Ð» Ð¿Ñ€Ð¸Ð²ÑÐ·Ð°Ð½ Ðº 3 ÑÑ‚Ð°Ñ‚ÑŒÑÐ¼. Ð£Ð´Ð°Ð»ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¸Ð²ÐµÐ´ÐµÑ‚ Ðº Ñ€Ð°Ð·Ñ€Ñ‹Ð²Ñƒ ÑÐ²ÑÐ·Ð¸`,
  confirmLabel: 'Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ',
  cancelLabel: 'ÐžÑ‚Ð¼ÐµÐ½Ð°',
  onConfirm: () => deleteFileAction(file.id),
})
```